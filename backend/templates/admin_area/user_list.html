{% extends "base.html" %}

{% block content %}
<div class="max-w-6xl mx-auto py-12 px-4 sm:px-6 lg:px-8">

    <div class="bg-white p-8 rounded-2xl shadow-2xl border border-gray-200">

        <!-- Título -->
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-extrabold text-green-800 flex items-center">
                <i class="fas fa-users mr-3 text-green-600"></i>
                Gerenciar Usuários
            </h1>
        </div>

        <!-- Tabela -->
        <div class="overflow-x-auto">
            <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Usuário</th>
                        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Email</th>
                        <th class="px-6 py-3 text-right text-sm font-semibold text-gray-700">Ações</th>
                    </tr>
                </thead>

                <tbody class="bg-white divide-y divide-gray-200">
                    {% for u in users %}
                    <tr class="hover:bg-gray-50 transition">
                        <td class="px-6 py-4 font-semibold text-gray-800">
                            {{ u.username }}
                        </td>
                        <td class="px-6 py-4 text-gray-600">
                            {{ u.email|default:"—" }}
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex justify-end gap-2 flex-wrap">

                                <a href="{% url 'admin_edit_user_permissions' u.id %}"
                                   class="inline-flex items-center px-4 py-2 rounded-lg
                                          bg-blue-100 text-blue-700 font-semibold
                                          hover:bg-blue-200 transition">
                                    <i class="fas fa-key mr-2"></i>
                                    Permissões
                                </a>

                                <a href="{% url 'admin_user_edit' u.id %}"
                                   class="inline-flex items-center px-4 py-2 rounded-lg
                                          bg-green-100 text-green-700 font-semibold
                                          hover:bg-green-200 transition">
                                    <i class="fas fa-edit mr-2"></i>
                                    Editar
                                </a>

                                <a href="{% url 'admin_delete_user' u.id %}"
                                   onclick="return confirm('Tem certeza que deseja excluir este usuário?')"
                                   class="inline-flex items-center px-4 py-2 rounded-lg
                                          bg-red-100 text-red-700 font-semibold
                                          hover:bg-red-200 transition">
                                    <i class="fas fa-trash mr-2"></i>
                                    Excluir
                                </a>

                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" class="px-6 py-10 text-center text-gray-500">
                            Nenhum usuário encontrado.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>
{% endblock %}
