{% extends 'base.html' %}

{% block title %}Categorias - Admin{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-4xl font-extrabold text-gray-900 border-b-4 border-green-500 pb-2">
            <i class="fas fa-tags mr-3 text-green-600"></i>
            Gestão de Categorias
        </h1>
        <a href="{% url 'admin_category_create' %}" 
           class="flex items-center bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
            <i class="fas fa-plus mr-2"></i> Adicionar Nova Categoria
        </a>
    </div>

    <div class="bg-white shadow-xl overflow-hidden sm:rounded-lg">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                        Nome
                    </th>
                    <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-40">
                        Ações
                    </th>
                </tr>
            </thead>

            <tbody class="bg-white divide-y divide-gray-200">
                {% for category in object_list %}
                <tr class="hover:bg-green-50 transition duration-150 ease-in-out">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        <i class="fas fa-folder-open mr-2 text-green-400"></i>
                        {{ category.name }}
                    </td>

                    <td class="px-6 py-4 whitespace-nowrap text-center text-sm font-medium">
                        <div class="flex items-center justify-center space-x-3">

                            <!-- Botão Editar -->
                            <a href="{% url 'admin_category_edit' category.id %}"
                               class="text-green-600 hover:text-green-900 font-medium hover:underline transition duration-150"
                               title="Editar Categoria">
                                <i class="fas fa-edit mr-1"></i> Editar
                            </a>

                            <!-- Botão Excluir -->
                            <form method="POST"
                                  action="{% url 'admin_category_delete' category.id %}"
                                  onsubmit="return confirm('⚠️ Tem certeza que deseja excluir a categoria {{ category.name }}? Esta ação não pode ser desfeita.');"
                                  class="inline">
                                {% csrf_token %}
                                <button type="submit"
                                    class="text-red-600 hover:text-red-900 font-medium hover:underline bg-transparent border-none p-0 cursor-pointer transition duration-150"
                                    title="Excluir Categoria">
                                    <i class="fas fa-trash-alt mr-1"></i> Excluir
                                </button>
                            </form>

                        </div>
                    </td>
                </tr>

                {% empty %}
                <tr>
                    <td colspan="2" class="px-6 py-10 text-center text-lg text-gray-500 bg-gray-50">
                        <i class="fas fa-info-circle mr-2"></i>
                        Não há categorias cadastradas. Comece adicionando uma nova!
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
